"use strict";(self.webpackChunkcivitai_developer=self.webpackChunkcivitai_developer||[]).push([[1915],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>k});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(t),m=i,k=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(k,a(a({ref:n},p),{},{components:t})):r.createElement(k,a({ref:n},p))}));function k(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[u]="string"==typeof e?e:i,a[1]=s;for(var c=2;c<o;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},68856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=t(87462),i=(t(67294),t(3905));const o={sidebar_position:3,title:"Link",tags:["link","models"]},a=void 0,s={unversionedId:"link",id:"link",title:"Link",description:"To make it easier to interact with your SD instance wherever it is, we've created a linking service that communicates between the SD instance and one to many clients from a single user.",source:"@site/docs/link.md",sourceDirName:".",slug:"/link",permalink:"/docs/link",draft:!1,tags:[{label:"link",permalink:"/docs/tags/link"},{label:"models",permalink:"/docs/tags/models"}],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Link",tags:["link","models"]},sidebar:"tutorialSidebar",previous:{title:"JavaScript SDK",permalink:"/docs/api/sdk/"},next:{title:"Diffusion Partner Program",permalink:"/docs/diffusion-partner-program"}},l={},c=[{value:"Special Features",id:"special-features",level:3},{value:"Initial Use Cases",id:"initial-use-cases",level:3},{value:"Interested in having Civitai Link connect to your Stable Diffusion service?",id:"interested-in-having-civitai-link-connect-to-your-stable-diffusion-service",level:3},{value:"Interested in using Civitai Link as part of your web app?",id:"interested-in-using-civitai-link-as-part-of-your-web-app",level:3},{value:"First Connection",id:"first-connection",level:2},{value:"Following Connections",id:"following-connections",level:2},{value:"Client",id:"client",level:2},{value:"Extension",id:"extension",level:2},{value:"Base Command",id:"base-command",level:2},{value:"<code>activities:list</code> \ud83c\udd70\ufe0f",id:"activitieslist-\ud83c\udd70\ufe0f",level:2},{value:"<code>resources:add</code> \ud83c\udd70\ufe0f",id:"resourcesadd-\ud83c\udd70\ufe0f",level:2},{value:"<code>resources:add:cancel</code> \ud83c\udd70\ufe0f",id:"resourcesaddcancel-\ud83c\udd70\ufe0f",level:2},{value:"<code>resources:remove</code> \ud83c\udd70\ufe0f",id:"resourcesremove-\ud83c\udd70\ufe0f",level:2},{value:"<code>resources:list</code> \ud83c\udd70\ufe0f",id:"resourceslist-\ud83c\udd70\ufe0f",level:2},{value:"<code>image:txt2img</code> \ud83c\udd71\ufe0f",id:"imagetxt2img-\ud83c\udd71\ufe0f",level:2},{value:"<code>image:img2img</code> \ud83c\udd71\ufe0f",id:"imageimg2img-\ud83c\udd71\ufe0f",level:2}],p={toc:c};function u(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To make it easier to interact with your SD instance wherever it is, we've created a linking service that communicates between the SD instance and one to many clients from a single user."),(0,i.kt)("p",null,"Ideally, this could be used to expose your SD instance to any front-end that then opts to use the Civitai Link, making it possible to generate right from any page that integrates it."),(0,i.kt)("h3",{id:"special-features"},"Special Features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Accessible from any site that integrates the link service"),(0,i.kt)("li",{parentName:"ul"},"Can be used from any device, allow you to managing resources and generating images from your beefy desktop while browsing on your mobile device"),(0,i.kt)("li",{parentName:"ul"},"No need to setup special firewall permissions, cors permissions, or API access, just install the extension and establish your link.")),(0,i.kt)("h3",{id:"initial-use-cases"},"Initial Use Cases"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Manage the resources on your SD instance"),(0,i.kt)("li",{parentName:"ul"},"Generate on sites using your own SD instance from any device")),(0,i.kt)("h1",{id:"integrating-civitai-link"},"Integrating Civitai Link"),(0,i.kt)("h3",{id:"interested-in-having-civitai-link-connect-to-your-stable-diffusion-service"},"Interested in having Civitai Link connect to your Stable Diffusion service?"),(0,i.kt)("p",null,"We've provided a brief outline of how it works below and would be happy to meet with you to discuss integration. The best way to reach us is in the ",(0,i.kt)("a",{parentName:"p",href:"https://civitai.com/discord"},"Development channel on our Discord server"),"."),(0,i.kt)("h3",{id:"interested-in-using-civitai-link-as-part-of-your-web-app"},"Interested in using Civitai Link as part of your web app?"),(0,i.kt)("p",null,"Cool! We're excited to hear what you have in mind. The best way to reach us is in the ",(0,i.kt)("a",{parentName:"p",href:"https://civitai.com/discord"},"Development channel on our Discord server"),"."),(0,i.kt)("h1",{id:"how-the-link-works"},"How the Link works"),(0,i.kt)("h2",{id:"first-connection"},"First Connection"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sequence"},"Client->Server: POST LinkInstance\nNote over Server: Generates LinkInstance\nServer->Client: Returns LinkKey\nClient->Server: Join room with LinkKey\nClient--\x3eExtension: User copies over LinkKey\nExtension->Server: Join room\\nwith LinkKey\nNote over Server: Upgrades LinkKey\nNote over Server: Moves to upgrade room\nServer->Extension: Gives new LinkKey\nNote over Extension: Stores new LinkKey\nClient->Extension: Makes requests in room\nNote over Extension: Perform actions\nExtension->Client: Responds with status in room\nNote over Server: On Disconnect notify room\n")),(0,i.kt)("h2",{id:"following-connections"},"Following Connections"),(0,i.kt)("h2",{id:"client"},"Client"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sequence"},"Client->Server: GET LinkInstances\nNote over Server: Finds LinkInstances for User\nServer->Client: Returns LinkInstances\nNote over Client: Selects LinkInstance\nClient->Server: Join room with LinkKey\n")),(0,i.kt)("h2",{id:"extension"},"Extension"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sequence"},"Note over Extension: Load stored LinkKey\nExtension->Server: Join room with LinkKey\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")," If the LinkKey no longer exists, the extension is disconnected and the stored LinkKey is removed."),(0,i.kt)("h1",{id:"link-commands"},"Link Commands"),(0,i.kt)("p",null,"Once the link is established, it can be used for a variety of purposes. Here are a few of the commands we'd like to support initially."),(0,i.kt)("p",null,"\ud83c\udd70\ufe0f = Alpha feature\n\ud83c\udd71\ufe0f = Beta feature"),(0,i.kt)("h2",{id:"base-command"},"Base Command"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid', // The identifier for the request\n  version: 'semantic version', // Version of the request\n  createdAt: Date,\n  updateAt?: Date\n}\n")),(0,i.kt)("h2",{id:"activitieslist-\ud83c\udd70\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"activities:list")," \ud83c\udd70\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[{\n  ... Response of last 10 requests\n}]\n")),(0,i.kt)("h2",{id:"resourcesadd-\ud83c\udd70\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"resources:add")," \ud83c\udd70\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    type: 'lora' | 'checkpoint' ...;\n    hash: 'sha256',\n    name: 'name of file',\n    previewImage: 'url to preview image',\n    url: 'url to download if missing'\n  }]\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    //... props from request\n    status: 'pending' | 'processing' | 'success' | 'error' | 'canceled',\n    progress: 0-100.00\n  }]\n  status: 'pending' | 'processing' | 'success' | 'error',\n}\n")),(0,i.kt)("h2",{id:"resourcesaddcancel-\ud83c\udd70\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"resources:add:cancel")," \ud83c\udd70\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid', // id of initial add request\n  resources: [{\n    type: 'lora' | 'checkpoint' ...;\n    hash: 'sha256'\n  }]\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    //... props from request\n    status: 'canceled'\n  }]\n  status: 'success',\n}\n")),(0,i.kt)("h2",{id:"resourcesremove-\ud83c\udd70\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"resources:remove")," \ud83c\udd70\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    type: 'lora' | 'checkpoint' ...;\n    hash: 'sha256',\n  }]\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    //... props from request\n    status: 'pending' | 'processing' | 'success' | 'error',\n  }]\n  status: 'pending' | 'processing' | 'success' | 'error',\n}\n")),(0,i.kt)("h2",{id:"resourceslist-\ud83c\udd70\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"resources:list")," \ud83c\udd70\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  types: [\n    'checkpoint',\n    'lora',\n    //...\n  ]\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  resources: [{\n    type: 'lora' | 'checkpoint' ...;\n    hash: 'sha256',\n    name: 'name of file',\n    path: 'optional path to file on fs'\n  }]\n}\n")),(0,i.kt)("h2",{id:"imagetxt2img-\ud83c\udd71\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"image:txt2img")," \ud83c\udd71\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")," It's likely that the connection will be upgraded to WebRTC before doing image generation requests to reduce latency and remove our service as a middleman\n",(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  quantity: 1, // How many to generate\n  batchSize: 1,\n  model: hash,\n  vae: hash,\n  additionalNetworks: [{\n    type: 'hypernet' | 'lora',\n    hash: 'hash',\n    name: 'name',\n    strength: 0.000-1.000\n  }],\n  params: {\n    prompt,\n    negativePrompt,\n    sampler,\n    seed,\n    steps,\n    width,\n    height,\n    cfgScale\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  images: ['base64']\n}\n")),(0,i.kt)("h2",{id:"imageimg2img-\ud83c\udd71\ufe0f"},(0,i.kt)("inlineCode",{parentName:"h2"},"image:img2img")," \ud83c\udd71\ufe0f"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")," It's likely that the connection will be upgraded to WebRTC before doing image generation requests to reduce latency and remove our service as a middleman\n",(0,i.kt)("strong",{parentName:"p"},"Request")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  //... content of txt2img\n  params: {\n    //... content of txt2img.params\n    initImage: 'url or base64',\n    maskImage: 'url or base64',\n    denoiseStrength: 0.00-1.00,\n    maskedOnly: false\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n  id: 'uuid',\n  images: ['base64']\n}\n")))}u.isMDXComponent=!0}}]);